{#
 # News entry template
 # -------------------
 #
 # This template gets loaded whenever a News entry’s URL is
 # requested. That’s because the News section’s Template setting is
 # set to “news/_entry”, the path to this template.
 #
 # When this template is loaded, it will already have an ‘entry’
 # variable, set to the requested News entry.
 #
 # See this page for more details on how Craft routes requests:
 # http://craftcms.com/docs/routing
 #}

{% extends "_layout" %}
{% set title = entry.title %}

{% block header %}
<header id="header" class="header-main entry-header row">
	<div class="col-xs-12 col-md-4">
		<h2 class="site-title">{{ siteName }}</h2>
		<p class="site-description">Designer at Snøhetta</p>
	</div>
	<div class="col-xs-12 col-md-3">
		<p class="entry-position">
			{% set entryIds = craft.entries.section('projects').order('postDate asc').ids() %}

			{# Get the position of this entry's ID within our IDs array #}
			{% set position = '' %}
			{% for key, value in entryIds if value == entry.id %}
			    {% set position = key + 1 %}
			{% endfor %}

			{# Get the amount of total entries #}
			{% set total = entryIds|length %}

			Project {{ position }}/{{ total }}
		</p>
		<p class="entry-typology">{{ entry.typology }}</p>
	</div>
	<div class="col-xs-12 col-md-3">
		<a href="/" class="home-link" rel="home">Back to index</a>
	</div>
</header>
{% endblock %}

{% block content %}
	<article class="entry-article">
		<header class="entry-article-header row">
			<div class="col-md-3">
				<div class="entry-meta">
					<h1 class="entry-title">{{ entry.title }}</h1>
					<p class="entry-time">2011–2012</p>
				</div>
			</div>
			<div class="col-md-8 col-md-offset-1">
				<p class="entry-desc">A magazine being responsive beyond screens.</p>
				<p class="entry-desc">The magazine format is challenged by exploring the unconquered space between analog and digital media, expressed as a flexible design that responds to the screen resolution – and to print. Through interviews with leading design studios, the content informed the design process. Reformat aims to change the existing mindset by proving that print can be one of many possible states of digital&nbsp;objects.</p>
			</div>
		</header>
		<div class="entry-article-content">
		{% for block in entry.projectContent %}

			{% if block.type == "rowImage" %}
			<div class="entry-article-image entry-article-row row">
				{% set asset = block.projectImage.first() %}
				{% if asset %}
					<div class="col-md-1">
						<div class="asset-meta">
							<div class="asset-ext">{{ asset.extension|upper }}</div>
							<div class="asset-size">{{ ceil(asset.size/1000) }} kB</div>
							<div class="asset-indice">Item {{ loop.index }}</div>
						</div>
					</div>
					<div class="col-md-{{ block.imageWidth }} col-md-offset-{{ block.imageOffset }}">
						<img src="{{ asset.getUrl }}" alt="Project image" class="entry-img">
					</div>
				{% endif %}
			</div>
			{% elseif block.type == "rowText" %}
			<div class="entry-article-text entry-article-row row">
				<div class="col-md-1">
					<div class="asset-meta">
						<div class="asset-chars">{{ block.projectText|length }} chars</div>
						<div class="asset-indice">Item {{ loop.index }}</div>
					</div>
				</div>
				<div class="col-md-{{ block.textWidth }} col-md-offset-{{ block.textOffset }}">
					<p class="entry-text">{{ block.projectText }}</p>
				</div>
			</div>
			{% endif %}

		{% endfor %}
		</div>
	</article>
{% endblock %}
