{% extends "_layout" %}
{% set title = entry.title %}
{% set bodytag = "project" %}

{% block header %}
<header id="header" class="header-main entry-header row">
	<div class="col-xs-12 col-md-4">
		<a href="/" class="home-link" rel="home">Back to index</a>
	</div>
	<div class="col-xs-12 col-md-3">
		<p class="entry-position">
			{% set entryIds = craft.entries.section('projects').orderBy('postDate asc').ids() %}
			{# Get the position of this entry's ID within our IDs array #}
			{% set position = '' %}
			{% for key, value in entryIds if value == entry.id %}
			    {% set position = key + 1 %}
			{% endfor %}
			{# Get the amount of total entries #}
			{% set total = entryIds|length %}
			Project {{ position }}/{{ total }}
		</p>
	</div>
</header>
{% endblock %}

{% block content %}
	<article class="entry-article">
		<header class="entry-article-header row">
			<div class="col-xs-12 col-md-4">
				<div class="entry-meta">
					<h1 class="entry-title">{{ entry.title|typogrify }}</h1>
				</div>
			</div>
			<div class="col-xs-12 col-md-3">
				<div class="entry-meta">
					<p class="entry-client">Client</p>
				</div>
			</div>
			<div class="col-xs-12 col-md-2">
				<a href="#entry-preamble" class="entry-read-more">Read more</a>
			</div>
			<div class="col-xs-12 col-md-2">
				<div class="entry-meta">
					<p class="entry-typology">{{ entry.typology }}</p>
				</div>
			</div>
			<div class="col-xs-12 col-md-1">
				<p class="entry-time">{{ entry.timePeriod }}</p>
			</div>
		</header>
		<div class="entry-article-content">
		{% for block in entry.projectContent %}

			{% if block.type == "rowImage" %}
			<div class="entry-article-image entry-article-row row">
				{% set asset = block.projectImage.one() %}
				{% if asset %}
					<div class="col-xs-12 col-md-12">
						<img src="{{ asset.getUrl }}" alt="Project image" class="entry-img" id="entry-img-{{ loop.index }}" data-asset-number="{{ loop.index }}">
					</div>
					<div class="col-xs-12" style="display: none;">
						<div class="asset-meta">
							<div class="asset-ext">Image/{{ asset.extension|upper }}</div>
							<div class="asset-size">{{ ceil(asset.size/1000) }} kB</div>
							<div class="asset-indice">{{ loop.index }}/{{ loop.length }}</div>
						</div>
					</div>
				{% endif %}
			</div>
			{% endif %}

		{% endfor %}
		</div>
		<div class="entry-preamble" id="entry-preamble">
			{{ entry.preamble }}
		</div>
	</article>
{% endblock %}

{% block footer %}
<footer class="footer-main row">
	<div class="col-xs-12 col-md-4 scroll-top-wrap">
		<a href="#" class="scroll-top">Scroll to top</a>
	</div>
	<div class="col-xs-12 col-md-4">
		<a href="#" class="project-nav">
			<div class="project-nav-label">Previous project</div>
			<div class="project-nav-title">Reformat</div>
		</a>	
	</div>
	<div class="col-xs-12 col-md-4">
		<a href="#" class="project-nav">
			<div class="project-nav-label">Next project</div>
			<div class="project-nav-title">Oslo 2022 Winter Olympic Bid</div>
		</a>	
	</div>
</footer>
<div class="cursor">
	<p>(Fig 1/6)</p>
</div>
{% endblock %}
