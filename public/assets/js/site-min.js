!function($){function t(){function t(){$(".archive-sort-btn").on("click",function(){var t=$(this).attr("data-sort-value"),o=$(this).hasClass("sort-asc");o?$(this).removeClass("sort-asc"):$(this).addClass("sort-asc"),e.isotope({sortBy:t,sortAscending:!o})})}var e=$(".archived-projects-wrap").isotope({getSortData:{title:".archived-project-title",client:".archived-project-client",typology:".archived-project-typology",year:".archived-project-year"},itemSelector:".archived-project",layoutMode:"vertical"});t()}function e(t){$(t).hover(function(){$(t).not(this).addClass("hover-out")},function(){$(t).removeClass("hover-out")})}function o(){$('a[href*="#"]:not([href="#"])').on("click",function(){if(u.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",function(){u.velocity("stop")}),location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=$(this.hash);if(t=t.length?t:$("[name="+this.hash.slice(1)+"]"),t.length)return $(u).animate({scrollTop:t.offset().top},1400,"",function(){}),$(u).velocity("scroll",{offset:t.offset().top,duration:1400}),!1}})}function n(){var t=!0;$(window).scroll(function(){var e=0===$(window).scrollTop();if(t!=e){t=e;var o=t?"fadeOut":"fadeIn";$(".scroll-top").velocity("finish").velocity(o,{delay:500,duration:1500})}})}function i(){$(".scroll-top").on("click",function(){return u.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",function(){u.velocity("stop")}),$(u).stop().velocity("scroll",{duration:1500,offset:0,mobileHA:!1}),!1})}function a(){for(var t=document.getElementsByTagName("iframe"),e=0;e<t.length;e++){var o=t[e],n=/www.youtube.com|player.vimeo.com/;if(o.src.search(n)>0){var i=o.height/o.width*100;o.style.position="absolute",o.style.top="0",o.style.left="0",o.width="100%",o.height="100%";var a=document.createElement("div");a.className="fluid-vids",a.style.width="100%",a.style.position="relative",a.style.paddingTop=i+"%";o.parentNode.insertBefore(a,o),a.appendChild(o)}}}function c(t,e){var o=t.getBoundingClientRect();return{x:e.clientX-o.left,y:e.clientY-o.top}}function r(t,e){var o=t.getBoundingClientRect();return{x:e.touches[0].clientX-o.left,y:e.touches[0].clientY-o.top}}function s(){g&&(y.moveTo(C.x,C.y),y.lineTo(E.x,E.y),y.stroke(),C=E)}function l(){h.width=h.width,y.lineWidth=.01}t(),e(".archived-project");var u=$("html, body");o();var d=$(".scroll-top");$(d).hide(),n(),i(),$(document).on("mousemove",function(t){$(".project-img").css({transform:"translate("+t.clientX+"px ,"+t.clientY+"px)"})}),a(),$(function(){var c=$("body"),r={anchors:"a",cacheLength:4,loadingClass:"is-loading",onStart:{duration:800,render:function(t){t.addClass("pfft")}},onAfter:function(c,r){a(),e(".archived-project"),n(),t(),o(),i(),c.removeClass("pfft")},prefetch:!0};$("#container").smoothState(r)});var h=$("#c"),v=$(window).width(),f=$(window).height();docH=$(document).height(),$(h).attr("width",v),$(h).attr("height",docH),$(h).addClass("active"),window.requestAnimFrame=function(t){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimaitonFrame||function(t){window.setTimeout(t,1e3/60)}}();var m,p;$(document).mousemove(function(t){return m=t.pageX,p=t.pageY,m;return p});var h=document.getElementById("c");if($("#canvas").length>0){var w=document.body,y=h.getContext("2d");y.strokeStyle="#000",y.font="bold 16px Arial",y.lineWidth=.25,y.translate(.5,.5),y.lineJoin=y.lineCap="round";var g=!0,E={x:m,y:p},C=E;w.addEventListener("mousedown",function(t){g=!0,C=c(h,t)},!1),w.addEventListener("mouseup",function(t){g=!0},!1),w.addEventListener("mousemove",function(t){E=c(h,t)},!1),h.addEventListener("touchstart",function(t){E=r(h,t);var e=t.touches[0],o=new MouseEvent("mousedown",{clientX:e.clientX,clientY:e.clientY});h.dispatchEvent(o)},!1),h.addEventListener("touchend",function(t){var e=new MouseEvent("mouseup",{});h.dispatchEvent(e)},!1),h.addEventListener("touchmove",function(t){var e=t.touches[0],o=new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY});h.dispatchEvent(o)},!1),document.body.addEventListener("touchstart",function(t){t.target==h&&t.preventDefault()},!1),document.body.addEventListener("touchend",function(t){t.target==h&&t.preventDefault()},!1),document.body.addEventListener("touchmove",function(t){t.target==h&&t.preventDefault()},!1),function t(){requestAnimFrame(t),s()}(),$(window).on("beforeunload",function(){var t=h.toDataURL();console.log(t),$.ajax({type:"POST",url:"upload.php",data:{imgBase64:t}}).done(function(t){console.log("Saved")})})}}(jQuery);