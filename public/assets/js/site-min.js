!function($){function t(){function t(){e.eq(n++).css("visibility","visible").hide().velocity("fadeIn",{duration:800}),n!=e.length&&setTimeout(t,150)}for(var e=$(".project").css("visibility","hidden"),n=0,o,i,r=e.length;r;o=parseInt(Math.random()*r),i=e[--r],e[r]=e[o],e[o]=i);t()}function e(){function t(){$(".archive-sort-btn").on("click",function(){var t=$(this).attr("data-sort-value"),n=$(this).hasClass("sort-asc");n?$(this).removeClass("sort-asc"):$(this).addClass("sort-asc"),e.isotope({sortBy:t,sortAscending:!n})})}var e=$(".archived-projects-wrap").isotope({getSortData:{title:".archived-project-title",client:".archived-project-client",typology:".archived-project-typology",year:".archived-project-year"},itemSelector:".archived-project",layoutMode:"vertical"});t()}function n(){scrollPos=0,$(window).scroll(function(){scrollPos=$(document).scrollTop()})}function o(){entryImg=$(".entry-img"),$(entryImg).click(function(){a(),entryNumber=$(this).attr("data-asset-number"),entryNextNumber=++entryNumber,entryNext=$("#entry-img-"+entryNextNumber),entryFirst=$("#entry-img-1"),scrollPos>0?$(p).velocity("scroll",{offset:entryNext.offset().top-48,duration:500}):$(p).velocity("scroll",{offset:entryFirst.offset().top-48,duration:500})})}function i(){$("#projects-container").imagesLoaded().always(function(t){}).done(function(t){}).fail(function(){}).progress(function(t,e){$(e.img).css("visibility","visible").hide().velocity("fadeIn",{duration:800})})}function r(t){$(t).hover(function(){$(t).not(this).addClass("hover-out")},function(){$(t).removeClass("hover-out")})}function a(){p.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",function(){p.velocity("stop")})}function c(){$('a[href*="#"]:not([href="#"])').on("click",function(){if(a(),location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=$(this.hash);if(t=t.length?t:$("[name="+this.hash.slice(1)+"]"),t.length)return $(p).animate({scrollTop:t.offset().top},1400,"",function(){}),$(p).velocity("scroll",{offset:t.offset().top,duration:1400}),!1}})}function s(){$(".scroll-top").on("click",function(){return a(),$(p).stop().velocity("scroll",{duration:1500,offset:0,mobileHA:!1}),!1})}function d(){windowHeight=window.innerHeight?window.innerHeight:$(window).height(),windowWidth=window.innerWidth?window.innerWidth:$(window).width()}function l(){function t(){$(".project-img").addClass("moveable"),$(document).on("mousemove",function(t){$(".moveable").css({transform:"translate("+t.clientX+"px ,"+t.clientY+"px)"})})}windowWidth>=960&&t(),$(window).resize(function(){d();var e=$(".project-img");windowWidth>=960?t():($(e).css({transform:"translate(0, 0)"}),$(e).removeClass("moveable"))})}function u(){for(var t=document.getElementsByTagName("iframe"),e=0;e<t.length;e++){var n=t[e],o=/www.youtube.com|player.vimeo.com/;if(n.src.search(o)>0){var i=n.height/n.width*100;n.style.position="absolute",n.style.top="0",n.style.left="0",n.width="100%",n.height="100%";var r=document.createElement("div");r.className="fluid-vids",r.style.width="100%",r.style.position="relative",r.style.paddingTop=i+"%";n.parentNode.insertBefore(r,n),r.appendChild(n)}}}function f(t,e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}function h(t,e){var n=t.getBoundingClientRect();return{x:e.touches[0].clientX-n.left,y:e.touches[0].clientY-n.top}}function m(){L&&(x.moveTo(N.x,N.y),x.lineTo(A.x,A.y),x.stroke(),N=A)}function v(){y.width=y.width,x.lineWidth=.01}var p=$("html, body"),w=$(".project");t(),e(),n(),o(),i(),r(".archived-project"),c(),s(),d(),l(),u(),$(function(){var i=$("body"),a={anchors:"a",cacheLength:4,loadingClass:"is-loading",onStart:{duration:800,render:function(t){t.addClass("pfft")}},onAfter:function(i,a){o(),r(".archived-project"),l(),t(),u(),n(),e(),c(),s(),d(),i.removeClass("pfft")},prefetch:!0};$("#container").smoothState(a)});var y=$("#c"),g=$(window).width(),b=$(window).height();docH=$(document).height(),$(y).attr("width",g),$(y).attr("height",docH),$(y).addClass("active"),window.requestAnimFrame=function(t){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimaitonFrame||function(t){window.setTimeout(t,1e3/60)}}();var E,C;$(document).mousemove(function(t){return E=t.pageX,C=t.pageY,E;return C});var y=document.getElementById("c");if($("#canvas").length>0){var j=document.body,x=y.getContext("2d");x.strokeStyle="#000",x.font="bold 16px Arial",x.lineWidth=.25,x.translate(.5,.5),x.lineJoin=x.lineCap="round";var L=!0,A={x:E,y:C},N=A;j.addEventListener("mousedown",function(t){L=!0,N=f(y,t)},!1),j.addEventListener("mouseup",function(t){L=!0},!1),j.addEventListener("mousemove",function(t){A=f(y,t)},!1),y.addEventListener("touchstart",function(t){A=h(y,t);var e=t.touches[0],n=new MouseEvent("mousedown",{clientX:e.clientX,clientY:e.clientY});y.dispatchEvent(n)},!1),y.addEventListener("touchend",function(t){var e=new MouseEvent("mouseup",{});y.dispatchEvent(e)},!1),y.addEventListener("touchmove",function(t){var e=t.touches[0],n=new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY});y.dispatchEvent(n)},!1),document.body.addEventListener("touchstart",function(t){t.target==y&&t.preventDefault()},!1),document.body.addEventListener("touchend",function(t){t.target==y&&t.preventDefault()},!1),document.body.addEventListener("touchmove",function(t){t.target==y&&t.preventDefault()},!1),function t(){requestAnimFrame(t),m()}(),$(window).on("beforeunload",function(){var t=y.toDataURL();console.log(t),$.ajax({type:"POST",url:"upload.php",data:{imgBase64:t}}).done(function(t){console.log("Saved")})})}}(jQuery);