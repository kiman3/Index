!function($){function t(){function t(){$(".archive-sort-btn").on("click",function(){var t=$(this).attr("data-sort-value"),o=$(this).hasClass("sort-asc");o?$(this).removeClass("sort-asc"):$(this).addClass("sort-asc"),e.isotope({sortBy:t,sortAscending:!o})})}var e=$(".archived-projects-wrap").isotope({getSortData:{title:".archived-project-title",client:".archived-project-client",typology:".archived-project-typology",year:".archived-project-year"},itemSelector:".archived-project",layoutMode:"vertical"});t()}function e(t){$(t).hover(function(){$(t).not(this).addClass("hover-out")},function(){$(t).removeClass("hover-out")})}function o(){$('a[href*="#"]:not([href="#"])').on("click",function(){if(h.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",function(){h.velocity("stop")}),location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=$(this.hash);if(t=t.length?t:$("[name="+this.hash.slice(1)+"]"),t.length)return $(h).animate({scrollTop:t.offset().top},1400,"",function(){}),$(h).velocity("scroll",{offset:t.offset().top,duration:1400}),!1}})}function n(){var t=!0;$(window).scroll(function(){var e=0===$(window).scrollTop();if(t!=e){t=e;var o=t?"fadeOut":"fadeIn";$(".scroll-top").velocity("finish").velocity(o,{delay:500,duration:1500})}})}function i(){$(".scroll-top").on("click",function(){return h.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",function(){h.velocity("stop")}),$(h).stop().velocity("scroll",{duration:1500,offset:0,mobileHA:!1}),!1})}function a(){windowHeight=window.innerHeight?window.innerHeight:$(window).height(),windowWidth=window.innerWidth?window.innerWidth:$(window).width()}function r(){function t(){$(".project-img").addClass("moveable"),$(document).on("mousemove",function(t){$(".moveable").css({transform:"translate("+t.clientX+"px ,"+t.clientY+"px)"})})}windowWidth>=960&&t(),$(window).resize(function(){a();var e=$(".project-img");windowWidth>=960?t():($(e).css({transform:"translate(0, 0)"}),$(e).removeClass("moveable"))})}function c(){for(var t=document.getElementsByTagName("iframe"),e=0;e<t.length;e++){var o=t[e],n=/www.youtube.com|player.vimeo.com/;if(o.src.search(n)>0){var i=o.height/o.width*100;o.style.position="absolute",o.style.top="0",o.style.left="0",o.width="100%",o.height="100%";var a=document.createElement("div");a.className="fluid-vids",a.style.width="100%",a.style.position="relative",a.style.paddingTop=i+"%";o.parentNode.insertBefore(a,o),a.appendChild(o)}}}function s(t,e){var o=t.getBoundingClientRect();return{x:e.clientX-o.left,y:e.clientY-o.top}}function d(t,e){var o=t.getBoundingClientRect();return{x:e.touches[0].clientX-o.left,y:e.touches[0].clientY-o.top}}function l(){b&&(E.moveTo(j.x,j.y),E.lineTo(C.x,C.y),E.stroke(),j=C)}function u(){f.width=f.width,E.lineWidth=.01}t(),e(".archived-project");var h=$("html, body");o();var v=$(".scroll-top");$(v).hide(),n(),i(),a(),r(),c(),$(function(){var s=$("body"),d={anchors:"a",cacheLength:4,loadingClass:"is-loading",onStart:{duration:800,render:function(t){t.addClass("pfft")}},onAfter:function(s,d){c(),e(".archived-project"),r(),n(),t(),o(),i(),a(),s.removeClass("pfft")},prefetch:!0};$("#container").smoothState(d)});var f=$("#c"),m=$(window).width(),w=$(window).height();docH=$(document).height(),$(f).attr("width",m),$(f).attr("height",docH),$(f).addClass("active"),window.requestAnimFrame=function(t){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimaitonFrame||function(t){window.setTimeout(t,1e3/60)}}();var p,y;$(document).mousemove(function(t){return p=t.pageX,y=t.pageY,p;return y});var f=document.getElementById("c");if($("#canvas").length>0){var g=document.body,E=f.getContext("2d");E.strokeStyle="#000",E.font="bold 16px Arial",E.lineWidth=.25,E.translate(.5,.5),E.lineJoin=E.lineCap="round";var b=!0,C={x:p,y:y},j=C;g.addEventListener("mousedown",function(t){b=!0,j=s(f,t)},!1),g.addEventListener("mouseup",function(t){b=!0},!1),g.addEventListener("mousemove",function(t){C=s(f,t)},!1),f.addEventListener("touchstart",function(t){C=d(f,t);var e=t.touches[0],o=new MouseEvent("mousedown",{clientX:e.clientX,clientY:e.clientY});f.dispatchEvent(o)},!1),f.addEventListener("touchend",function(t){var e=new MouseEvent("mouseup",{});f.dispatchEvent(e)},!1),f.addEventListener("touchmove",function(t){var e=t.touches[0],o=new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY});f.dispatchEvent(o)},!1),document.body.addEventListener("touchstart",function(t){t.target==f&&t.preventDefault()},!1),document.body.addEventListener("touchend",function(t){t.target==f&&t.preventDefault()},!1),document.body.addEventListener("touchmove",function(t){t.target==f&&t.preventDefault()},!1),function t(){requestAnimFrame(t),l()}(),$(window).on("beforeunload",function(){var t=f.toDataURL();console.log(t),$.ajax({type:"POST",url:"upload.php",data:{imgBase64:t}}).done(function(t){console.log("Saved")})})}}(jQuery);