!function($){function t(){function t(){$(".archive-sort-btn").on("click",function(){var t=$(this).attr("data-sort-value"),o=$(this).hasClass("sort-asc");o?$(this).removeClass("sort-asc"):$(this).addClass("sort-asc"),e.isotope({sortBy:t,sortAscending:!o})})}var e=$(".archived-projects-wrap").isotope({getSortData:{title:".archived-project-title",client:".archived-project-client",typology:".archived-project-typology",year:".archived-project-year"},itemSelector:".archived-project",layoutMode:"vertical"});t()}function e(){$('a[href*="#"]:not([href="#"])').on("click",function(){if(l.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",function(){l.velocity("stop")}),location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=$(this.hash);if(t=t.length?t:$("[name="+this.hash.slice(1)+"]"),t.length)return $(l).animate({scrollTop:t.offset().top},1400,"",function(){}),$(l).velocity("scroll",{offset:t.offset().top,duration:1400}),!1}})}function o(){var t=!0;$(window).scroll(function(){var e=0===$(window).scrollTop();if(t!=e){t=e;var o=t?"fadeOut":"fadeIn";$(".scroll-top").velocity("finish").velocity(o,{delay:500,duration:1500})}})}function n(){$(".scroll-top").on("click",function(){return l.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",function(){l.velocity("stop")}),$(l).stop().velocity("scroll",{duration:1500,offset:0,mobileHA:!1}),!1})}function i(){for(var t=document.getElementsByTagName("iframe"),e=0;e<t.length;e++){var o=t[e],n=/www.youtube.com|player.vimeo.com/;if(o.src.search(n)>0){var i=o.height/o.width*100;o.style.position="absolute",o.style.top="0",o.style.left="0",o.width="100%",o.height="100%";var a=document.createElement("div");a.className="fluid-vids",a.style.width="100%",a.style.position="relative",a.style.paddingTop=i+"%";o.parentNode.insertBefore(a,o),a.appendChild(o)}}}function a(t,e){var o=t.getBoundingClientRect();return{x:e.clientX-o.left,y:e.clientY-o.top}}function c(t,e){var o=t.getBoundingClientRect();return{x:e.touches[0].clientX-o.left,y:e.touches[0].clientY-o.top}}function r(){y&&(w.moveTo(E.x,E.y),w.lineTo(g.x,g.y),w.stroke(),E=g)}function s(){d.width=d.width,w.lineWidth=.01}t();var l=$("html, body");e();var u=$(".scroll-top");$(u).hide(),o(),n(),$(document).on("mousemove",function(t){$(".project-img").css({transform:"translate("+t.clientX+"px ,"+t.clientY+"px)"})}),i(),$(function(){var a=$("body"),c={anchors:"a",cacheLength:4,loadingClass:"is-loading",onStart:{duration:800,render:function(t){t.addClass("pfft")}},onAfter:function(a,c){i(),o(),t(),e(),n(),a.removeClass("pfft")},prefetch:!0};$("#container").smoothState(c)});var d=$("#c"),h=$(window).width(),v=$(window).height();docH=$(document).height(),$(d).attr("width",h),$(d).attr("height",docH),$(d).addClass("active"),window.requestAnimFrame=function(t){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimaitonFrame||function(t){window.setTimeout(t,1e3/60)}}();var f,m;$(document).mousemove(function(t){return f=t.pageX,m=t.pageY,f;return m});var d=document.getElementById("c");if($("#canvas").length>0){var p=document.body,w=d.getContext("2d");w.strokeStyle="#000",w.font="bold 16px Arial",w.lineWidth=.25,w.translate(.5,.5),w.lineJoin=w.lineCap="round";var y=!0,g={x:f,y:m},E=g;p.addEventListener("mousedown",function(t){y=!0,E=a(d,t)},!1),p.addEventListener("mouseup",function(t){y=!0},!1),p.addEventListener("mousemove",function(t){g=a(d,t)},!1),d.addEventListener("touchstart",function(t){g=c(d,t);var e=t.touches[0],o=new MouseEvent("mousedown",{clientX:e.clientX,clientY:e.clientY});d.dispatchEvent(o)},!1),d.addEventListener("touchend",function(t){var e=new MouseEvent("mouseup",{});d.dispatchEvent(e)},!1),d.addEventListener("touchmove",function(t){var e=t.touches[0],o=new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY});d.dispatchEvent(o)},!1),document.body.addEventListener("touchstart",function(t){t.target==d&&t.preventDefault()},!1),document.body.addEventListener("touchend",function(t){t.target==d&&t.preventDefault()},!1),document.body.addEventListener("touchmove",function(t){t.target==d&&t.preventDefault()},!1),function t(){requestAnimFrame(t),r()}(),$(window).on("beforeunload",function(){var t=d.toDataURL();console.log(t),$.ajax({type:"POST",url:"upload.php",data:{imgBase64:t}}).done(function(t){console.log("Saved")})})}}(jQuery);